# AI Chief of Staff (Telegram Bot + Mini App)

## 1) Product format
- `Telegram Bot`: –≤—Ö–æ–¥—è—â–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ, —Ç–µ–∫—Å—Ç, —Ñ–∞–π–ª—ã, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
- `Telegram Mini App`: –∫–∞–ª–µ–Ω–¥–∞—Ä—å, –∑–∞–¥–∞—á–∏, –ø—Ä–∞–≤–∏–ª–∞, –ø–æ–¥–ø–∏—Å–∫–∞, —Å—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.
- `Backend API (FastAPI)`: –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.

## 2) Core flow
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `voice/text/file/link` –≤ –±–æ—Ç–∞.
2. Gateway –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –≤—Ö–æ–¥ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
3. `Filter Agent` –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç: `IGNORE | TASK | MEETING | INFO_ONLY | ASK_CLARIFICATION`.
4. `Strategist Agent` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏ —Å–ª–æ—Ç –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º.
5. `Operator Agent` —Å–æ–∑–¥–∞–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏:
- –≤—Å—Ç—Ä–µ—á–∏ –≤ Google Calendar,
- –∑–∞–¥–∞—á–∏ –≤ Google Tasks,
- –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î,
- –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ 10 –º–∏–Ω—É—Ç.
6. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ —Å—Å—ã–ª–∫—É –≤ —á–∞—Ç.

## 3) Services
- `gateway-service`: Telegram webhook, –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π.
- `ai-orchestrator`: –≤—ã–∑–æ–≤—ã LLM/STT, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–Ω—ã–º –ø–∞–π–ø–ª–∞–π–Ω–æ–º.
- `calendar-service`: Google Calendar/Tasks sync + internal calendar cache.
- `notification-worker`: –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ Telegram reminders.
- `billing-service`: —Ç–∞—Ä–∏—Ñ—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ñ–∏—á, webhook –ø–ª–∞—Ç–µ–∂–µ–π.

## 4) Suggested stack
- Backend: `Python 3.12`, `FastAPI`, `SQLAlchemy`, `Alembic`, `PostgreSQL`, `Redis`.
- Workers: `Celery` (–∏–ª–∏ `RQ`) + beat/scheduler.
- AI: `Whisper STT`, LLM (OpenAI/Claude), vector store (`pgvector`).
- Integrations: Telegram Bot API, Telegram Mini App, Google Calendar API, Google Tasks API.

## 5) Bot UI
- `üéô –ó–∞–ø–∏—Å–∞—Ç—å –≥–æ–ª–æ—Å`
- `‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É`
- `üìÖ –°–µ–≥–æ–¥–Ω—è`
- `üìÜ –ù–µ–¥–µ–ª—è`
- `‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏`

## 6) Mini App screens
- `–°–µ–≥–æ–¥–Ω—è`: —Ç–∞–π–º–ª–∞–π–Ω, busy blocks, –∑–∞–¥–∞—á–∏ –¥–Ω—è.
- `–ö–∞–ª–µ–Ω–¥–∞—Ä—å`: week/month + –≤—Å—Ç—Ä–µ—á–∏/–∑–∞–¥–∞—á–∏.
- `–ü—Ä–∞–≤–∏–ª–∞`: —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã, DND, –∞–≤—Ç–æ-—Ä–µ—à–µ–Ω–∏—è.
- `–ü–æ–¥–ø–∏—Å–∫–∞`: –ø–ª–∞–Ω, –ª–∏–º–∏—Ç—ã, –∞–ø–≥—Ä–µ–π–¥.

## 7) Subscription model
- `Free`: –±–∞–∑–æ–≤—ã–µ —Ä—É—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –ª–∏–º–∏—Ç—ã –ø–æ –∑–∞–¥–∞—á–∞–º.
- `Pro`: voice, –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç—ã, Google sync, –∞–≤—Ç–æ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.
- `Executive`: –∫–∞—Å—Ç–æ–º-–ø—Ä–∞–≤–∏–ª–∞, –∞–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

## 8) Non-functional requirements
- Idempotency –¥–ª—è webhook/–æ–ø–µ—Ä–∞—Ü–∏–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.
- Retry + DLQ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API.
- Audit trail –ø–æ —Ä–µ—à–µ–Ω–∏—è–º –∞–≥–µ–Ω—Ç–∞.
- PII —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (tokens, external links where needed).
- Timezone-safe scheduling.
